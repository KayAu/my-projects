
<link href="~/Content/bootstrap-datepicker3.css" rel="stylesheet" />
@*<script src="~/Scripts/Controllers/newOpeningController.js" type="text/javascript"></script>*@
<script type="text/javascript">

    $(document).ready(function () {

        //$('#newOpenExpiryPicker').datepicker({
        //    format: 'dd/mm/yyyy'
        //});

        //$('#newOpenExpiryPicker').on('changeDate', function (ev) {
        //    //Functionality to be called whenever the date is changed
        //    $('#ExpiryDate').val($('#new_open_exp_date').val());
        //});


        ////$('#deals-image-link').click(function () {
        ////    $('#dealsImageUploader').trigger('click');
        ////});

    });

</script>
<div class="form-title" >
    <h3>Add Information for New Opening</h3>
</div>
<form name="newOpeningForm"  ng-controller="subscriptionController" ng-init="loadModel(4)"  novalidate valid-submission="update($event)">  
    <div class="form-horizontal">       
          
        <div id="form-leftSection" > 
            <merchant-selector datasource="$parent.merchants" ng-model="model.DirId" 
                invalid="newOpeningForm.$submitted && newOpeningForm.merchant.$error.required"></merchant-selector>   
          @*  <validation-error has-error="newOpeningForm.$submitted && newOpeningForm.merchant.$error.required" show-icon="true"
                        error-message="The merchant is required"></validation-error>   *@ 
        
            <div class="form-group">
                <label class="control-label col-xs-2">Description</label>
                <div class="col-xs-10">
                    <textarea ng-model="model.Description" class="form-control" rows="8" name="description" required validation-style/>
                    <validation-error has-error="newOpeningForm.$submitted && newOpeningForm.description.$error.required" show-icon="true"
                        error-message="The title is required"></validation-error>    
                </div>
            </div>
 @*           <div class="form-group">
                <label class="control-label col-xs-2" >Expiry Date</label>
                <div class="col-xs-10">
                    <div class='input-group date' id='newOpenExpiryPicker'>
                        <input id="new_open_exp_date" type='text'" class="form-control" ng-model="model.ExpiryDate"/>
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                    </div>
                </div>
            </div>*@
            <div class="form-group">
                <input type="file" ng-model="model.uploadedImage" selected-image="model.Image" name="newOpeningImg" id="newOpeningImageUploader" 
                    accept='image/*' class="hdn" image-file-reader required />

                <label class="control-label col-xs-2">Company Picture</label>
                <div class="col-xs-10">
                    <label style="font-weight: normal;margin-top: 8px;">Max. file size: 8 MB. Allowed images: jpg, gif, png.</label><br />
                    <div image-picker  file-uploader="newOpeningImageUploader" uploaded-image="model.uploadedImage"></div>
                     <validation-error has-error="newOpeningForm.$submitted && newOpeningForm.newOpeningImg.$error.required" show-icon="false"
                        error-message="The picture is required"></validation-error>   
                </div>
            </div>
        </div>
        @*<div id="form-rightSection">
            <input type="file" ng-model="model.uploadedImage" name="ImageData" id="newOpeningImageUploader" class="hdn" accept='image/*' image-file-reader />
            <div class="form-group">
                  <label class="control-label">Highlight Picture</label><br />
                  <span>Max. file size: 8 MB. Allowed images: jpg, gif, png.</span><br />
            <div image-picker  file-uploader="newOpeningImageUploader" uploaded-image="model.uploadedImage"></div>
        </div>   
    </div>*@
        <div class="form-update">
            <input id="btnDirContinue" type="button" value="Continue" class="btn btn-large btn-primary btn-r-pos btn-subs continue" 
                ng-click="saveAll($event)" ng-disabled="!completed" />
             &nbsp
             @*<input id="btnDirUpdate" type="button" value="Update" class="btn btn-large btn-primary btn-r-pos btn-subs" ng-click="update($event)"/>*@
             <button id="btnNewOpenUpdate" class="btn btn-large btn-primary btn-r-pos btn-subs action"  type="submit" >
	            <i class="act-indicator i-M-loader"></i>
	            <i class="act-indicator i-accept"></i>
	            <i class="act-indicator i-ignore"></i>
	            <span><b>Update</b></span>
            </button>      
            
              @*<input id="btnTest" type="button" value="Test" class="btn btn-large btn-primary btn-r-pos btn-subs" 
                ng-click="testing()"  />*@
            <span>{{model.DirId}}</span>
        </div>
    </div>
</form>